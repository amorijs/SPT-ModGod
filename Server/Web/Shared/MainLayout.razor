@using ModGod.Services
@using Color = MudBlazor.Color
@using System.Reflection
@inherits LayoutComponentBase

@inject ISnackbar Snackbar
@inject ConfigService ConfigService

<HeadContent>
    <link href="@Assets["_content/MudBlazor/MudBlazor.min.css"]" rel="stylesheet" />
    <meta name="robots" content="noindex, nofollow">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="@Assets["_content/MudBlazor/MudBlazor.min.js"]"></script>
    <style>
        :root {
            --primary-bg: #0d1117;
            --secondary-bg: #161b22;
            --card-bg: #21262d;
            --accent-cyan: #58a6ff;
            --accent-green: #3fb950;
            --accent-orange: #d29922;
            --accent-red: #f85149;
            --text-primary: #f0f6fc;
            --text-secondary: #8b949e;
            --border-color: #30363d;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--primary-bg);
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        .gradient-border {
            border: 2px solid transparent;
            background: linear-gradient(var(--card-bg), var(--card-bg)) padding-box,
                        linear-gradient(135deg, var(--accent-cyan), var(--accent-green)) border-box;
        }

        .glow-cyan {
            box-shadow: 0 0 20px rgba(88, 166, 255, 0.3);
        }
    </style>
</HeadContent>

<MudThemeProvider Theme="@CustomTheme" IsDarkMode/>
<MudPopoverProvider/>
<MudSnackbarProvider />
<MudDialogProvider />

<MudLayout>
    <MudAppBar Dense Elevation="0" Style="background: var(--secondary-bg); border-bottom: 1px solid var(--border-color);">
        <MudIcon Icon="@Icons.Material.Filled.Sync" Size="Size.Large" Style="color: var(--accent-cyan);" Class="mr-2" />
        <MudText Typo="Typo.h5" Style="color: var(--text-primary); font-weight: 700;">ModGod</MudText>
        <MudText Typo="Typo.caption" Class="ml-2" Style="color: var(--text-secondary); align-self: flex-end; margin-bottom: 4px;">@Version</MudText>
        <MudSpacer/>
    </MudAppBar>
    <MudMainContent Class="pt-4 px-4" Style="background: var(--primary-bg); min-height: calc(100vh - 48px);">
        @Body
    </MudMainContent>
</MudLayout>

@code {
    private string Version => $"v{Assembly.GetExecutingAssembly().GetName().Version?.ToString(3) ?? "0.0.0"}";
    
    MudTheme CustomTheme = new MudTheme()
    {
        PaletteDark = new PaletteDark()
        {
            Primary = "#58a6ff",
            Secondary = "#3fb950",
            Tertiary = "#d29922",
            Background = "#0d1117",
            Surface = "#161b22",
            DrawerBackground = "#161b22",
            DrawerText = "#f0f6fc",
            DrawerIcon = "#8b949e",
            AppbarBackground = "#161b22",
            AppbarText = "#f0f6fc",
            TextPrimary = "#f0f6fc",
            TextSecondary = "#8b949e",
            TextDisabled = "#484f58",
            ActionDefault = "#8b949e",
            ActionDisabled = "#484f58",
            ActionDisabledBackground = "#21262d",
            LinesDefault = "#30363d",
            TableLines = "#30363d",
            Divider = "#30363d",
            Success = "#3fb950",
            Info = "#58a6ff",
            Warning = "#d29922",
            Error = "#f85149",
        },
    };
}
